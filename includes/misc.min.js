var tcolor,popwin,popdoc,popbody,popp,popcheckPosTimeout,popdivShowTimer;function $(e){return document.getElementById(e)}function olOpen(e,o,t,n){var i=$("overlay"),r=$("iframeholder"),s=$("ifrm");null==n&&(n=1==ismobile?1:0),s.style.width=o+"px",s.style.height=t-3+"px",s.src=e,r.style.marginTop="-"+t/2+"px",r.style.marginLeft="-"+o/2+"px",i.style.display="block",r.style.height=t+"px",r.style.overflow="auto",1==n&&resizeOL()}function trim(e){return ltrim(rtrim(e))}function ltrim(e){return e.replace(/^\s+/g,"")}function rtrim(e){return e.replace(/\s+$/g,"")}function dload(e,o){return o<1&&!ismobile?(olOpen("/includes/pleasewait.php",240,180,0),setTimeout("location.href='"+e+"'",300),setTimeout("stopwait()",5400)):location.href=e,!1}function stopwait(){$("overlay").style.display="none",setTimeout('$("ifrm").src="/includes/empty.htm"',200)}function resizeOL(){if("none"!=$("overlay").style.display){var e=$("iframeholder"),o=$("ifrm");xdim=Math.max(document.documentElement.clientWidth,window.innerWidth||0),ydim=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o.style.width=.9*xdim+"px",o.style.height=.88*ydim+"px",e.style.height=.9*ydim+"px",e.style.marginLeft="-"+.45*xdim+"px",e.style.marginTop="-"+.45*ydim+"px"}}function nvl(e,o){return""==(e=trim(e+""))?o:e}function excol(e){"0px"!=$("biblenav").style.height&&sizenavto(0);var o=$("nav");return prfscrollynav||(o.style.transition="left 0s"),1==e?o.style.left="-210px":(o.style.left=0,o.scrollTop=1,o.scrollTop=0),isexpanded=1-isexpanded,!1}function addLoadEvent(e){var o=document,t="addEventListener";o[t]?o[t]("DOMContentLoaded",e):window.attachEvent("onload",e)}function getViewDivWidth(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)+"px"}function setparagraphs(){var e=prfparachoice;0==page&&1==prfversebreak&&(e=prfparachoice>2?prfparachoice-2:prfparachoice);for(var o=document.getElementById("view"),t=o.getElementsByTagName("p"),n=0,i=t.length;n<i;n++)cname=t[n].className,"hp"!=cname&&"hp1"!=cname&&"lst"!=cname&&"spc"!=cname&&(t[n].className="style"+e);if(2==prfparachoice||4==prfparachoice)for(n=0,i=(t=o.getElementsByTagName("li")).length;n<i;n++)t[n].style.textAlign="justify";setTimeout("try{popp.outer.style.fontSize="+.9*prffontsize+"+'em';}catch(e){}",1200)}function scrolltopos(e,o,t){void 0===t&&(t=0);var n=getspaceneeded(),i=Math.floor(findTopPos(o))+t-n;if(prfscrollynav){var r=Math.floor(findTopPos(e))-n;if(Math.abs(r-i)>2300){var s=r>i?i+2300:i-2300;window.scrollTo(0,s)}callJSanim(i,o,n)}else window.scrollTo(0,i);return!1}function scrolltotop(e){return void 0===e&&(e="botbot"),prfscrollynav?(cursorY=getCursorY(),cursorY>2300&&window.scrollTo(0,2300),callJSanim(0,e,0)):window.scrollTo(0,0),!1}function callJSanim(e,o,t){jsAnimScroll.cubic_bezier(0,1,1,1,window,e,700,20),e>0&&setTimeout("scrollfail('"+o+"', "+e+", "+t+");",800)}function getCursorY(e){return(e=e||window.event).pageX||e.pageY?e.pageY:e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop}function scrollfail(e,o,t){var n=parseInt(Math.max(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0));Math.abs(n-o)>2&&(n=Math.floor(findTopPos(e)),window.scrollTo(0,n-t))}function getspaceneeded(){var e=window.navigator.userAgent,o=0;return e.toLowerCase().indexOf("firefox")>-1&&(o=15),e.indexOf("MSIE ")>-1&&(o=20),e.indexOf("Trident/")>-1&&(o=20),e.indexOf("Edge/")>-1&&(o=12),o+hdrheight+3}function addbmk(e,o,t,n,i){var r=decodeURIComponent(getCookie("rev_bookmarks")),s=e+","+o+","+t+","+n+","+(0==e&&i>0?"nav":"")+i;setCookie("rev_bookmarks",r=checknumbmks(r=s+(""==r?"":";")+r),cookieexpiredays),s=myrevid+"|"+o+"|"+t+"|"+n+"|"+i;try{$("mrimg_"+s).setAttribute("data-isbmked","1")}catch(e){}reloadBookmarks(page,0)}function checknumbmks(e){var o=e.split(";");return o.length>bookmarksallowed&&(o.pop(),e=o.join(";")),e}function delbmks(){confirm("Are you sure you want to delete all your bookmarks?\n\nThis is not undoable!")&&(setCookie("rev_bookmarks","",cookieexpiredays),reloadBookmarks(page,1),location.reload())}function delbmk(e){var o="oops";try{o=$("id_"+e).innerHTML}catch(e){o="oops"}if(confirm("Delete the bookmark for\n"+o+"?")){var t=decodeURIComponent(getCookie("rev_bookmarks"))+";";setCookie("rev_bookmarks",t=(t=t.replace(e+";","")).substring(0,t.length-1),cookieexpiredays),e=(e=(e=myrevid+e.substring(e.indexOf(","))).replace("nav","")).replace(/,/g,"|");try{$("mrimg_"+e).setAttribute("data-isbmked","0")}catch(e){}reloadBookmarks(page,0)}return!1}function reloadBookmarks(page,saveonly,forcebible){null==forcebible&&(forcebible=0);var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status&&0==saveonly){var ret=JSON.parse(xmlhttp.responseText);try{$("bmkcontent").innerHTML=ret.html}catch(e){}eval(ret.jscript),sizenavto(Math.min(document.documentElement.clientHeight-80,$("bnspan").scrollHeight+3))}},xmlhttp.open("GET","/jsonbookmarks.php?fromloc="+page+":"+test+":"+book+":"+chap+":"+(0==page&&1==forcebible?-1:vers),!0),xmlhttp.send()}function hilitefoot(e,o){var t=0,n=getspaceneeded(),i=Math.floor(findTopPos("ft"+o))-n-30;tcolor=$("ft"+o).style.color,Math.max(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>i-toffset&&(scrolltopos(e,"ft"+o,-(toffset+30)),t=1),setTimeout("popfoot('"+o+"');",1==prfscrollynav&&1==t?700:200)}function findTopPos(e){var o=document.getElementById(e),t=document.documentElement;return o.getBoundingClientRect().top+window.pageYOffset-t.clientTop}function popfoot(e){var o=$("ft"+e);o.style.color="#ff0000",o.style.fontWeight="bold",growit(e,7)}function growit(e,o){var t=$("ft"+e);o<18?(t.style.fontSize=10*o+"%",o++,setTimeout("growit('"+e+"',"+o+")",50)):setTimeout("shrinkit('"+e+"',"+(o-1)+")",280)}function shrinkit(e,o){var t=$("ft"+e);o>6?(t.style.fontSize=10*o+"%",o--,setTimeout("shrinkit('"+e+"',"+o+")",50)):(t.style.fontSize="70%",t.style.color=tcolor,t.style.fontWeight="normal")}function getCookie(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return""}function setSessionCookie(e,o){document.cookie=e+"="+o+"; path=/"}function setCookie(e,o,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+encodeURIComponent(o)+"; "+i+"; path=/"}function addfootnote(e,o){for(var t=$(e+"footnotes"),n=t.children.length-1;n>=o;n--)$(e+"delf"+n).setAttribute("onclick","removefootnote('"+e+"',"+(n+1)+");"),$(e+"quof"+n).setAttribute("onclick","appendquotes('"+e+"',"+(n+1)+");"),$(e+"emsf"+n).setAttribute("onclick","appendems('"+e+"',"+(n+1)+");"),$(e+"delf"+n).id=e+"delf"+(n+1),$(e+"quof"+n).id=e+"quof"+(n+1),$(e+"emsf"+n).id=e+"emsf"+(n+1),$(e+"fidx"+n).id=e+"fidx"+(n+1);newfn=document.createElement("div"),newfn.innerHTML+='&nbsp;&nbsp;<a id="'+e+"delf"+o+'" onclick="removefootnote(\''+e+"',"+o+');"><img src="/i/tbl_hide.png" alt="" border="0" title="delete this footnote" /></a>&nbsp;',newfn.innerHTML+='<span id="'+e+"fidx"+o+'" class="fnidx">'+o+"</span> ",newfn.appendChild(createTextEl(e+"footnote",1==ismobile?"65%":"77%")),newfn.innerHTML+='&nbsp;<a id="'+e+"quof"+o+'" onclick="appendquotes(\''+e+"',"+o+');" title="click to append smart quotes">&ldquo;&rdquo;</a>',newfn.innerHTML+='&nbsp;<a id="'+e+"emsf"+o+'" onclick="appendems(\''+e+"',"+o+');" title="click to append emphasize <em> tags"><small>em</small></a>',t.insertBefore(newfn,t.children[o]),renumfns(e),document.getElementsByName(e+"footnote[]")[o].focus()}function removefootnote(e,o){var t=0,n=$(e+"footnotes"),i=trim(document.getElementsByName(e+"footnote[]")[o].value);if(""!=i?confirm("Are you sure you want to delete this footnote?\n\n"+i.substring(0,40)+"..")&&(n.removeChild(n.children[o]),document.frm.dirt.value=1,t=1):(n.removeChild(n.children[o]),t=1),1==t)for(var r=n.children.length,s=o+1;s<=r;s++)$(e+"delf"+s).setAttribute("onclick","removefootnote('"+e+"',"+(s-1)+");"),$(e+"quof"+s).setAttribute("onclick","appendquotes('"+e+"',"+(s-1)+");"),$(e+"emsf"+s).setAttribute("onclick","appendems('"+e+"',"+(s-1)+");"),$(e+"delf"+s).id=e+"delf"+(s-1),$(e+"quof"+s).id=e+"quof"+(s-1),$(e+"emsf"+s).id=e+"emsf"+(s-1),$(e+"fidx"+s).id=e+"fidx"+(s-1);renumfns(e)}function renumfns(e){for(var o=$(e+"footnotes"),t=(o.children.length,o.getElementsByClassName("fnidx")),n=0;n<t.length;n++)t[n].innerHTML=n+1}function fnreindex(e,o,t,n){1==n&&alert("oldidx: "+o+"\nnewidx: "+t),$(e+"addf"+o).setAttribute("onclick","addfootnote('"+e+"',"+(t+1)+");"),$(e+"delf"+o).setAttribute("onclick","removefootnote('"+e+"',"+t+");"),$(e+"quof"+o).setAttribute("onclick","appendquotes('"+e+"',"+t+");"),$(e+"emsf"+o).setAttribute("onclick","appendems('"+e+"',"+t+");"),$(e+"addf"+o).id=e+"addf"+t,$(e+"delf"+o).id=e+"delf"+t,$(e+"quof"+o).id=e+"quof"+t,$(e+"emsf"+o).id=e+"emsf"+t,$(e+"fidx"+o).id=e+"fidx"+t}function checkfootnotes(e,o){try{var t=document.getElementsByName(e+"footnote[]"),n=t.length;for(var i of t.values())if(i.value=trim(i.value),""==i.value||"missing footnote"==i.value)return alert("There is a missing footnote.\n\nPlease correct the error."),$("div"+e+"footnotes").style.display="block",i.value="missing footnote",i.focus(),i.select(),!1;var r=(o.match(/\[fn\]/g)||[]).length;if(n!=r)return alert(("vrs"==e?"Verse":"Commentary")+" footnotes mismatch:\n\nThere are "+r+" footnote tags,\nand "+n+" footnotes.\n\nPlease correct the error."),!1}catch(e){}return!0}function createTextEl(e,o){var t=document.createElement("input");return t.type="text",t.name=e+"[]",t.style.width=o,t.style.marginTop="2px",t.setAttribute("autocomplete","off"),t.onchange=setdirt(),t}function appendquotes(e,o){doinput(document.getElementsByName(e+"footnote[]")[o],"“","”")}function appendems(e,o){doinput(document.getElementsByName(e+"footnote[]")[o],"<em>","</em>")}function doinput(e,o,t){var n,i,r,s=e.value,p=e.selectionStart,l=e.selectionEnd;p==l&&0==l&&""!=e.value&&(l=p=e.value.length),n=s.substring(0,p),i=s.substring(p,l),r=s.substring(l),e.value=n+o+i+t+r,e.setSelectionRange(p+o.length,l+o.length),setdirt(),e.focus()}function excoldiv(e){var o=$(e);prfscrollynav||(o.style.transition="height 0s"),"0px"==o.style.height?o.style.height=o.scrollHeight+"px":o.style.height=0}function resetcookies(){setCookie("rev_preferences","x",-1),setCookie("rev_biblefontprefs","x",-1),setCookie("rev_lastloc","x",-1),setCookie("rev_expprefs","x",-1),setCookie("rev_timezone","x",-1),setCookie("rev_history","x",-1),setCookie("rev_bookmarks","x",-1),setCookie("rev_inapp","x",-1),setCookie("rev_isexpanded","x",-1),setCookie("rev_lastbibleloc","x",-1),setCookie("rev_lightbox_permanent","x",-1),setCookie("rev_lightbox_session","x",-1),setCookie("rev_wnblog","x",-1),setCookie("rev_rswismobile","x",-1),setCookie("rev_rswinapp","x",-1),setCookie("rev_screenwidth",parseInt(getViewDivWidth()),cookieexpiredays)}function saveprefs(){setCookie("rev_preferences",prfviewcols+";"+prfversebreak+";"+prffontsize+";"+prflineheight+";"+prffontfamily+";"+prfswipenav+";"+prfuseoefirst+";"+prfparachoice+";"+prfnavonchap+";"+prfcommnewtab+";"+prfcolortheme+";"+prfcommlinkstyl+";"+prflexicon+";"+prfscrollynav+";"+prfshowdevitems+";"+prfshowcommlinks+";"+prfviewversnav+";"+prfshowpdflinks+";"+prfversnavwhat+";"+prflinkcommentary+";"+prfucaseot+";"+prfdiffbiblefont,cookieexpiredays)}function setcolumns(e){var o=ismobile?3:5;prfviewcols+=e,prfviewcols>o&&(prfviewcols=o),0==prfviewcols&&(prfviewcols=1);var t=document.querySelectorAll("[id^='bblviewcols']");for(ni=0;ni<t.length;ni++)t[ni].className="col"+prfviewcols+"container";saveprefs()}function setviewcols(e){prfviewcols=e,saveprefs()}function setversebreak(e){prfversebreak=e,saveprefs()}function setversenavwhat(e){prfversnavwhat=e,saveprefs()}function settextsize(e){var o=$("view");return""!=o.style.fontSize&&99!=e||(o.style.fontSize=0==ismobile?"1em":"1.3em",e=0),prffontsize=(parseFloat(o.style.fontSize)+.1*e).toFixed(2),o.style.fontSize=prffontsize+"em",popp.outer.style.fontSize=.9*prffontsize+"em",saveprefs(),!1}function setlineheight(e){var o=$("view");return""!=o.style.lineHeight&&99!=e||(o.style.lineHeight="1.3em",$("nav").style.lineHeight="1.3em",e=0),prflineheight=(parseFloat(o.style.lineHeight)+.1*e).toFixed(2),o.style.lineHeight=prflineheight+"em",saveprefs(),!1}function setfontfamily(e,o){var t=o<4?", times new roman":", arial";prffontfamily=e,document.body.style.fontFamily=e+t,0==page&&0!=prfdiffbiblefont||($("view").style.fontFamily=e+t),saveprefs()}function setswipenav(e){prfswipenav=e,saveprefs(),location.reload()}function setuseoefirst(e){prfuseoefirst=1==e?1:0,saveprefs()}function setdiffbiblefont(e){prfdiffbiblefont=1==e?1:0,saveprefs()}function setnavonchap(e){prfnavonchap=1==e?1:0,saveprefs()}function setcommnewtab(e){prfcommnewtab=1==e?1:0,saveprefs()}function setshowcommlinks(e){prfshowcommlinks=1==e?1:0,saveprefs()}function setcolortheme(){switch(prfcolortheme){case 0:prfcolortheme=2;break;case 1:prfcolortheme=0;break;case 2:prfcolortheme=1}saveprefs()}function setcolortheme2(e){prfcolortheme=e,saveprefs()}function setparachoice(e){var o=e.paraindent.checked?1:0,t=e.parjustify.checked?1:0;0==o&&0==t&&(prfparachoice=1),0==o&&1==t&&(prfparachoice=2),1==o&&0==t&&(prfparachoice=3),1==o&&1==t&&(prfparachoice=4),saveprefs()}function setparachoice2(e,o){var t=3==prfparachoice||4==prfparachoice?1:0,n=2==prfparachoice||4==prfparachoice?1:0;"a"==e&&(n=o),"i"==e&&(t=o),0==t&&0==n&&(prfparachoice=1),0==t&&1==n&&(prfparachoice=2),1==t&&0==n&&(prfparachoice=3),1==t&&1==n&&(prfparachoice=4),saveprefs(),setparagraphs()}function setlexicon(e){prflexicon=e,saveprefs()}function setlinkcommentary(e){prflinkcommentary=e,saveprefs()}function setscrollynav(e){prfscrollynav=1==e?1:0,saveprefs()}function setcommlinkstyl(e){prfcommlinkstyl=e,saveprefs()}function setshowdevitems(e){prfshowdevitems=1==e?1:0,saveprefs()}function toggleismobile(e){setCookie("rev_rswismobile",1==e?1:0,cookieexpiredays)}function toggleinapp(e){setCookie("rev_rswinapp",1==e?1:0,1==e?.25:-1)}function setviewversnav(e){prfviewversnav=1==e?1:0,saveprefs()}function setucaseot(e){prfucaseot=1==e?1:0,saveprefs()}function setshowpdflinks(e){prfshowpdflinks=1==e?1:0,saveprefs()}function savebiblefontprefs(){setCookie("rev_biblefontprefs",prfbiblefontsize+";"+prfbiblelineheight+";"+prfbiblefontfamily,cookieexpiredays)}function setbibletextsize(e){var o=$("view");return""!=o.style.fontSize&&99!=e||(o.style.fontSize=0==ismobile?"1em":"1.3em",e=0),prfbiblefontsize=(parseFloat(o.style.fontSize)+.1*e).toFixed(2),o.style.fontSize=prfbiblefontsize+"em",popp.outer.style.fontSize=.9*prfbiblefontsize+"em",savebiblefontprefs(),!1}function setbiblelineheight(e){var o=$("view");return""!=o.style.lineHeight&&99!=e||(o.style.lineHeight="1.3em",$("nav").style.lineHeight="1.3em",e=0),prfbiblelineheight=(parseFloat(o.style.lineHeight)+.1*e).toFixed(2),o.style.lineHeight=prfbiblelineheight+"em",savebiblefontprefs(),!1}function setbiblefontfamily(e,o){var t=o<4?", times new roman":", arial";prfbiblefontfamily=e,$("view").style.fontFamily=e+t,savebiblefontprefs()}function pophandleLinkMouseOver(popind,param){e=popwin.event,popclearPositionTimer();var target=e.target?e.target:e.srcElement;popp.outer.style.display="block",popp.outer.style.visibility="hidden",popp.outer.style.zIndex=101,popdivShowTimer=setTimeout("popp.outer.style.visibility = 'visible';",300),popp.header.innerHTML="Footnote ("+popind+")",popp.content.innerHTML=eval(param),poppositionPopup(target)}function pophandleLinkMouseOut(){clearTimeout(popdivShowTimer),popdivShowTimer=null,popstartPositionTimer()}function poppositionPopup(e){var o=popgetWindowSize(),t=popgetPosition(e),n=t.left-popp.outer.offsetWidth/2,i=t.top-popp.outer.clientHeight;n<0?n=4:n+10+popp.outer.clientWidth>=o.width&&(n=o.width-popp.outer.clientWidth-16),i<0||i<popgetScroll().y+$("header").clientHeight?i=t.top+e.offsetHeight:i-=2,popp.outer.style.top=i+"px",popp.outer.style.left=n+"px"}function pophandlePopupMouseOver(){popclearPositionTimer()}function pophandlePopupMouseOut(){popstartPositionTimer()}function popstartPositionTimer(){popcheckPosTimeout=setTimeout(pophidePopup,200)}function popclearPositionTimer(){clearTimeout(popcheckPosTimeout),popcheckPosTimeout=null}function pophidePopup(){popp.outer.style.display="none"}function popgetPosition(e){var o=0;if(e.offsetParent)do{o+=e.offsetTop}while(e=e.offsetParent);return{left:cursorX,top:o}}function popgetWindowSize(){var e=0,o=0;return"number"==typeof popwin.innerWidth?(e=popwin.innerWidth,o=popwin.innerHeight):popdoc.documentElement&&(popdoc.documentElement.clientWidth||popdoc.documentElement.clientHeight)?(e=popdoc.documentElement.clientWidth,o=popdoc.documentElement.clientHeight):popbody&&(popbody.clientWidth||popbody.clientHeight)&&(e=popbody.clientWidth,o=popbody.clientHeight),{width:e,height:o}}function popgetScroll(){var e=0,o=0;return popbody&&(popbody.scrollLeft||popbody.scrollTop)?(o=popbody.scrollTop,e=popbody.scrollLeft):popdoc.documentElement&&(popdoc.documentElement.scrollLeft||popdoc.documentElement.scrollTop)?(o=popdoc.documentElement.scrollTop,e=popdoc.documentElement.scrollLeft):"number"==typeof popwin.pageYOffset&&(o=popwin.pageYOffset,e=popwin.pageXOffset),{x:e,y:o}}function popaddEvent(e,o,t){if(e.attachEvent)e.attachEvent("on"+o,t);else if(e.addEventListener)e.addEventListener(o,t,!1);else{var n=e["on"+o];e["on"+o]=function(){t(),n()}}}function initpoppopup(){popwin=window,popdoc=document,popbody=popdoc.body;var e,o,t,n,i=["header","content"];for((popp={outer:popdoc.createElement("div")}).outer.className="findvers_popup_outer",e=0,o=i.length;e<o;e++)n=i[e],(t=popdoc.createElement("div")).className="findvers_popup_"+n,popp.outer.appendChild(t),popp[n]=t;popbody.appendChild(popp.outer),popaddEvent(popp.outer,"mouseover",pophandlePopupMouseOver),popaddEvent(popp.outer,"mouseout",pophandlePopupMouseOut)}doonload=function(){var e=parseInt(getViewDivWidth()),o=parseInt(e/50);o<8&&(o=8),o>24&&(o=24),$("view").style.paddingLeft=o+"px",$("view").style.paddingRight=o+"px",setparagraphs(),setCookie("rev_lastloc",mitm+";"+page+";"+test+";"+book+";"+chap+";"+vers,cookieexpiredays),0==page&&book>0&&setCookie("rev_lastbibleloc",mitm+";"+page+";"+test+";"+book+";"+chap+";"+vers,cookieexpiredays),setCookie("rev_screenwidth",e,cookieexpiredays),1==isexpanded&&setTimeout("excol(0);",100)},popaddEvent(window,"load",initpoppopup);