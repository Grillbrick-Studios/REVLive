var findtop={};(function(){})();findtop.Reference=function(){var d="none",e=arguments;if(e[0]){for(d=trim(e[0]);-1<d.indexOf("  ",0);)d=d.replace("  "," ");d=d.replace(/ /g,"_");return{bookIndex:d,isValid:function(){return"none"!=d},toString:function(){return'see topic on "'+this.bookIndex+'"'},toShortUrl:function(){return"/topic/"+this.bookIndex}}}};
(function(){var d={maxNodes:500,autoStart:!0,startNodeId:"",className:"findvers_reference",ignoreClassName:"bibly_ignore",ignoreTags:["h1","h2","h3","h4"],newTagName:"A",handleLinks:function(a,b){a.setAttribute("href",b.toShortUrl());a.setAttribute("title","Click to "+b.toString());prfcommnewtab&&a.setAttribute("target","_self");a.setAttribute("rel",b.toString());a.setAttribute("class",d.className)}},e=window,k=document,r=/((topic|topics) (on|of)( the)? )(((, | | and |, and )?\u201c([^\u201d]+)((\.|,|;)?\u201d))+)/mi,
t=["a","script","style","textarea"],u=function(a){var b=r.exec(a.data);if(b){var c=b[0];b=a.splitText(b.index);b.splitText(c.length);return a=l(a,b)}return a},l=function(a,b){if(null==b.nodeValue)return b;var c=b.nodeValue.indexOf("\u201d,"),g=b.nodeValue.indexOf("\u201d;"),m=b.nodeValue.indexOf("\u201d and"),f=b.nodeValue.indexOf("\u201d, and"),e=b.nodeValue.indexOf("\u201d ");c=Math.min(0>c?999:c,0>g?999:g,0>m?999:m,0>f?999:f,0>e?999:e);999==c&&(c=-1);if(0<c){c++;var h=b.splitText(c);h=h.splitText(h.nodeValue.indexOf("\u201c"))}b=
b.splitText(b.nodeValue.indexOf("\u201c")+1);b.splitText(b.nodeValue.indexOf("\u201d"));c=b.nodeValue;tmp=Math.max(c.indexOf("."),c.indexOf(","),c.indexOf(";"));0<tmp&&(b.splitText(tmp),c=b.nodeValue);c=new findtop.Reference(c);c=null!=c&&"undefined"!=typeof c.isValid&&c.isValid()?c:void 0;return"undefined"!=typeof c?(newNode=a.ownerDocument.createElement(d.newTagName),a.parentNode.replaceChild(newNode,b),d.handleLinks(newNode,c),newNode.appendChild(b),h&&(newNode=l(a,h)),newNode):b},p=function(a){n(a.childNodes[0],
1,u)},n=function(a,b,c){for(var g=0,e=new RegExp("^("+t.concat(d.ignoreTags).join("|")+")$","i");a&&0<b;){g++;if(g>=d.maxNodes){setTimeout(function(){n(a,b,c)},50);break}switch(a.nodeType){case 1:if(!e.test(a.tagName.toLowerCase())&&0<a.childNodes.length&&(""==d.ignoreClassName||-1==a.className.toString().indexOf(d.ignoreClassName))){a=a.childNodes[0];b++;continue}break;case 3:case 4:a=c(a)}if(a.nextSibling)a=a.nextSibling;else for(;0<b;)if(a=a.parentNode,b--,a.nextSibling){a=a.nextSibling;break}}},
q=!1,v=function(){var a,b,c=arguments[0]||{},d=1,e=arguments.length;for("object"!==typeof c&&"function"!==typeof c&&(c={});d<e;d++)if(null!=(a=arguments[d]))for(b in a){var f=a[b];c!==f&&void 0!==f&&(c[b]=f)}return c};"undefined"!=typeof window.findtopics&&(d=v(d,window.findtopics));d.scan=function(){q||(q=!0,k=document,""!=d.startNodeId&&(node=k.getElementById(d.startNodeId)),null!=node&&p(node))};d.scanForReferences=p;e.findtopics=d})();
