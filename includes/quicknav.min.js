function quicknav(e,r){if(13==r.keyCode){e.value=trim(e.value);var a=e.value;if(""!=a&&(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/\./g," ")).replace(/:/g," ")).replace(/;/g," ")).replace(/-/g," ")).replace(/\//g," ")).replace(/\\/g,"")).replace(/~/g," ")).replace(/%/g," ")).replace(/"/g,"")).replace(/'/g,"")).replace(/ +(?= )/g,""),a=trim(a),e.value=a,""!=a)){if(arsrch=a.split(" "),arsrch.length>1&&"intr"==arsrch[0].substring(0,4)&&(arsrch.shift(),arsrch.push("i")),isFinite(String(arsrch[0]))){var s=arsrch.shift();arsrch[0]=s+(void 0!==arsrch[0]?arsrch[0]:"")}if(("c"==arsrch[0]||"comm"==arsrch[0])&&isFinite(String(arsrch[1]))){s=arsrch.shift();var i=arsrch.shift();arsrch[0]=i+(void 0!==arsrch[0]?arsrch[0]:""),arsrch.unshift(s)}if(1==arsrch.length&&"intr"==arsrch[0].substring(0,4))return a="info/1",void(location.href="/"+a);if("c"==(s=arsrch[arsrch.length-1].toLowerCase())||"comm"==s)switch(arsrch.length){case 2:arsrch.unshift("bk"),arsrch.pop();break;case 3:arsrch.unshift("c"),arsrch.pop()}2!=arsrch.length||"i"!=s&&"intr"!=s.substring(0,4)||(arsrch.unshift("bk"),arsrch.pop()),2!=arsrch.length||"o"!=s&&"outl"!=s.substring(0,4)||(arsrch.unshift("outl"),arsrch.pop());var t,n,c=0;switch(arsrch[0].toLowerCase()){case"i":t="info",c=1;break;case"a":t="appx",c=1;break;case"e":1==editorcomments&&(arsrch[0]="enot",arsrch.length=1);break;case"w":t="word",c=1;break;case"t":t="topi",c=1;break;case"o":case"outl":t="outl",c=1;break;case"play":case"pl":t="play",c=1;break;case"bc":case"bk":t="book",c=1;break;case"c":case"com":arsrch[0]="comm";break;case"b":arsrch[0]="blog",arsrch.length=1;break;case"m":arsrch[0]="myre",arsrch.length=1;break;case"wn":case"n":arsrch[0]="wnew",arsrch.length=1;break;case"ch":case"chr":arsrch[0]="chro",arsrch.length=2;break;case"h":arsrch[0]="help",arsrch.length=1;break;case"s":arsrch[0]="srch",arsrch.length=1;break;case"p":arsrch[0]="pref",arsrch.length=1;break;case"d":arsrch[0]="dont",arsrch.length=1;break;case"bib":arsrch[0]="bibl",arsrch.length=1;break;case"hi":case"hist":return"none"==$("biblenav").style.display&&popbiblenav(),void dobiblenav("navmitm=5")}1==c&&(arsrch.shift(),n=arsrch.join("_"),arsrch[0]=t,arsrch[1]=n||"list_all",arsrch.length=2),arsrch.length>4&&(arsrch.length=4),4!=arsrch.length||"comm"!=arsrch[0]||isNaN(arsrch[3])||(arsrch[3]="nav"+arsrch[3]),4==arsrch.length&&isNaN(arsrch[0])&&!isNaN(arsrch[3])&&(arsrch.length=3),3!=arsrch.length||"comm"==arsrch[0]||isNaN(arsrch[2])||(arsrch[2]="nav"+arsrch[2]),1==arsrch.length&&"comm"!=arsrch[0]&&"blog"!=arsrch[0]&&"wnew"!=arsrch[0]&&"help"!=arsrch[0]&&"srch"!=arsrch[0]&&"pref"!=arsrch[0]&&"chro"!=arsrch[0]&&"myre"!=arsrch[0]&&"enot"!=arsrch[0]&&"dont"!=arsrch[0]&&(arsrch[1]="all"),a=arsrch.join("/"),location.href="/"+a}}}function popbiblenav(){"0px"==$("biblenav").style.height?dobiblenav("curpage="+page):sizenavto(0)}function callbiblenav(e){0==arguments.length&&(e=1);try{clearTimeout(gbmktimeout)}catch(e){}if(44==page||(0==page||1==page||4==page||5==page||8==page||10==page||13==page||24==page||41==page||14==page&&(2==test||3==test||4==test))&&test>-1){var r=0==page||1==page||5==page||10==page||13==page||24==page||41==page?1:4==page?2:3==test?3:4,a=test,s=0;8==page&&(r=test),14==page&&2==test&&(r=6,s=2),44==page&&(r=6,a=2,s=chap),dobiblenav("navmitm="+r+"&navtest="+a+"&navbook=0&navchap="+s),e&&$("srchtext").blur(),0!=page&&4!=page&&14!=page||setTimeout("handlescroll();",500)}else popbiblenav()}function handlescroll(){try{var e=$("mybk").getBoundingClientRect().top,r=$("biblenav");e>r.clientHeight&&(r.scrollTop=e-r.clientHeight)}catch(e){}}function dobiblenav(e){isexpanded&&excol(isexpanded);var r=$("biblenav");parseInt(r.style.height)<24&&(r.style.height="24px"),""==r.innerHTML&&(r.innerHTML="<small>one moment..</small>"),r.style.overflowY="scroll";var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){if(r.innerHTML=a.responseText,0==e.indexOf("navmitm=5")&&(inhistory=1),e.indexOf("wscat")>0){var s=parseInt(e.substring(e.indexOf("wscat")+6));setCookie("rev_wscat",s,1)}var i=$("bnspan");sizenavto(Math.min(document.documentElement.clientHeight-80,i.scrollHeight+3))}},a.open("GET","/jsonbiblenav.php?"+e,!0),a.send()}function sizenavto(e,r){void 0===r&&(r=0),r++;var a=$("biblenav");if(0==prfscrollynav&&(a.style.transition="height 0s"),a.style.height=e+"px",e<3){inhistory=0;try{a.innerHTML=""}catch(e){}}}var resinitsiz=window.innerWidth<520?160:210,playingres="-";function sizres(e,r){var a=$("video"+e);if(prfscrollynav||(a.style.transition="width 0s"),goback++,a.style.width==resinitsiz+"px"){if("-"!=playingres)return"video"==playingres.substr(0,5)?sizres(playingres.replace(/[^\d.]/g,""),""):toggleplaypause(playingres.replace(/[^\d.]/g,""),e),void setTimeout("sizres("+e+",'"+r+"')",500);a.style.width="720px",$("exconvid"+e).src="/i/contractvideo.png",setTimeout("loadvid("+e+",'"+r+"')",prfscrollynav?350:100),playingres="video"+e}else $("frm"+e).src="/includes/videoload.php?id="+e,setTimeout("$('video"+e+"').style.width = "+resinitsiz+"+'px'",260),$("exconvid"+e).src="/i/expandvideo.png",playingres="-"}function stopifplaying(e){if("-"!=playingres){var r=playingres.replace(/[^\d.]/g,"");if("video"==playingres.substr(0,5))sizres(r,"");else{var a=$("aplayer"+r);a.paused||(a.pause(),playingres="-")}}}function loadvid(e,r){incresviews(e),$("frm"+e).src="https://www.youtube.com/embed/"+r+"?rel=0&autoplay=1"}function incresviews(e){var r=new XMLHttpRequest;r.onreadystatechange=function(){},r.open("GET","/jsonincresviews.php?id="+e,!0),r.send()}switch(prfcolortheme){case 0:var colors=Array("","#000","#fff","#ccc","#525252","blue","#ddd","#aaa");break;case 1:colors=Array("_LOD","#ddd","#000","#666","#ddd","yellow","#666","#aaa");break;case 2:colors=Array("_SEP","#5f4b32","#fbf0d9","#bda78e","#5f4b32","blue","#dbd0b9","#bda78e")}function showresource(e){var r="",a=document.createElement("DIV");a.id="lightbox",r='<div id="resdiv" style="position:relative;top:50%;transform:translateY(-50%);max-height:'+(window.innerHeight-50)+"px;overflow-y:auto;width:90%;max-width:720px;left:0;right:0;margin:auto;padding:0 10px;color:"+colors[1]+";background-color:"+colors[2]+";border:1px solid "+colors[6]+';border-radius:8px;text-align:center;line-height:1.3em;">',r+='<div style="position:sticky;z-index:999;top:-1px;background-color:'+colors[2]+';padding:7px 0;">',r+='<span style="display:inline-block;width:10%;">&nbsp;</span><h3 style="display:inline-block;width:80%;text-align:center;margin:0;">STF Resource</h3>',r+='<span style="display:inline-block;width:10%;text-align:right;cursor:pointer;" onclick="trashlb();"><img src="/i/redx.png" style="width:20px;" alt="" /></span>',r+="</div>",r+="[[content]]",r+='<p style="margin:9px 0;"><input type="button" class="gobackbutton" value="Close" onclick="trashlb();" /></p>',r+="</div>";var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(r=r.replace("[[content]]",s.responseText),a.innerHTML=r,document.body.appendChild(a),a.style.transition="opacity .7s",setTimeout("$('lightbox').style.opacity=1",1))},s.open("GET","/jsonshowresource.php?id="+e,!0),s.send()}function trashlb(){$("lightbox").style.opacity=0,setTimeout("$('lightbox').parentNode.removeChild($('lightbox'))",300)}function toggleplaypause(e,r){var a=$("aplayer"+e),s=$("ispeaker"+e);a.paused?("-"!=playingres&&("video"==playingres.substr(0,5)?sizres(playingres.replace(/[^\d.]/g,""),""):(aid=playingres.replace(/[^\d.]/g,""),playingres="-",toggleplaypause(aid,r))),incresviews(r),a.play(),s.src="/i/audio_stop.png",playingres="audio"+e):(a.pause(),s.src="/i/audio.png",playingres="-")}function stopothers(e,r){"-"!=playingres&&("video"==playingres.substr(0,5)?sizres(playingres.replace(/[^\d.]/g,""),""):(aid=playingres.replace(/[^\d.]/g,""),e!=aid&&($("aplayer"+aid).pause(),$("ispeaker"+aid).src="/i/audio.png"))),$("ispeaker"+e).src="/i/audio_stop.png",incresviews(r),playingres="audio"+e}function stopplayer(e){$("ispeaker"+e).src="/i/audio.png"}