var findapx={};(function(){})(),findapx.parseReference=function(a){var b=-1,c=new String(a);return b=c.replace(/[^\d.]/g,""),findapx.Reference(b,1,1,-1,-1)},findapx.Reference=function(){var a=-1,b=-1,c=-1,d=arguments;if(0==d.length);else{if(1==d.length&&"string"==typeof d[0])return findapx.parseReference(d[0]);if(1==d.length)return null;a=d[0],b=d[1],c=d[2]}return{bookIndex:a,chapter:b,verse:c,chapter1:b,verse1:c,chapter2:-1,verse2:-1,isValid:function(){for(var b=0;b<findappx.apxidx.length;b++)if(a==findappx.apxidx[b]){return!0}return!1},toString:function(){return 0>this.bookIndex?"invalid":"see Appendix "+this.bookIndex},toShortUrl:function(){return 0>this.bookIndex?"invalid":"/Appendix/"+this.bookIndex+(1==prfcommnewtab?"/ct":"/bb")}}},function(){var a=function(a,c){a.setAttribute("href",c.toShortUrl()),a.setAttribute("title","Click to "+c.toString()),prfcommnewtab&&a.setAttribute("target","_blank"),a.setAttribute("rel",c.toString()),a.setAttribute("class",b.className)},b={maxNodes:500,linkVersion:"",autoStart:!0,startNodeId:"",ignoreClassName:"bibly_ignore",ignoreTags:["h1","h2","h3","h4"],newTagName:"A",apxidx:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],handleLinks:a},c=window,d=document,e=null,f=new RegExp("\\b(?:see\\s(?:appendix|appx)\\s#?)\\d{1,3}\\b","mi"),g=["a","script","style","textarea"],h=function(a){var b,c,d,e,g=f.exec(a.data);return g?(b=g[0],c=a.splitText(g.index+4),d=c.splitText(b.length-4),e=i(a,c),e):a},i=function(a,c){if(null==c.nodeValue)return c;var d;return refText=c.nodeValue,d=j(refText),"undefined"!=typeof d&&d.isValid()?(newNode=a.ownerDocument.createElement(b.newTagName),a.parentNode.replaceChild(newNode,c),b.handleLinks(newNode,d),newNode.appendChild(c),newNode):c},j=function(a){var b=new findapx.Reference(a);return null!=b&&"undefined"!=typeof b.isValid&&b.isValid()?b:void 0},k=function(a){l(a.childNodes[0],1,h)},l=function(a,c,d){for(var e=0,f=new RegExp("^("+g.concat(b.ignoreTags).join("|")+")$","i");a&&0<c;){if(e++,e>=b.maxNodes)return void setTimeout(function(){l(a,c,d)},50);switch(a.nodeType){case 1:if(!f.test(a.tagName.toLowerCase())&&0<a.childNodes.length&&(""==b.ignoreClassName||-1==a.className.toString().indexOf(b.ignoreClassName))){a=a.childNodes[0],c++;continue}break;case 3:case 4:a=d(a);}if(a.nextSibling)a=a.nextSibling;else for(;0<c;)if(a=a.parentNode,c--,a.nextSibling){a=a.nextSibling;break}}},m=!1,n=function(){m||(m=!0,d=document,e=d.body,""!=b.startNodeId&&(node=d.getElementById(b.startNodeId)),null==node&&(node=e),k(node),m=!1)};"undefined"!=typeof window.findappx&&(b=function(){var a,b,c,d,e=arguments[0]||{},f=1,g=arguments.length;for("object"!=typeof e&&"function"!=typeof e&&(e={});f<g;f++)if(null!=(a=arguments[f]))for(b in a)(c=e[b],d=a[b],e!==d)&&void 0!==d&&(e[b]=d);return e}(b,window.findappx)),b.scan=n,b.scanForReferences=k,c.findappx=b}();
